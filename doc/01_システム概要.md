# 01. システム概要

## 1.1 アプリの目的

本アプリは Electron + React + TypeScript で構築されたデスクトップダッシュボードで、主に以下を実現します。

- Google アカウントでログイン/ログアウト
- Google Calendar の予定を日付指定で取得して一覧表示
- タスクの予実管理（登録/更新/削除、計測ログ）
- 自動取得（指定時刻 / 指定間隔）
- Windows の初回自動起動設定
- トレイ常駐によるバックグラウンド実行

## 1.2 技術スタック

- デスクトップ: `Electron`
- フロントエンド: `React 19` + `TypeScript`
- ビルド: `electron-vite`
- パッケージング: `electron-builder`
- Google 連携: `googleapis` + `@google-cloud/local-auth`
- ローカルDB: `lowdb`
- UI補助: `react-select`

## 1.3 実行モデル

- Main Process
  - 認証、Google API 呼び出し、ファイル保存、スケジューラ、トレイ管理
  - `index.ts` はコンポジション中心、機能処理はサービスへ分割
- Preload
  - `window.api` を介した安全な IPC ブリッジ
- Renderer
  - UI 表示とユーザー操作
  - `App.tsx` は画面オーケストレーション、表示はコンポーネントへ分離
  - 日付入力ロジックは `useDateEditor` へ集約
- Shared
  - `src/shared/contracts.ts` で Main / Preload / Renderer の契約型を共有

## 1.4 主要ファイル

- Main
  - `src/main/index.ts`
  - `src/main/googleAuth.ts`
  - `src/main/appSettings.ts`
  - `src/main/ipc/handlers/*`
  - `src/main/services/calendarPublisher.ts`
  - `src/main/services/autoFetchScheduler.ts`
  - `src/main/services/autoLaunch.ts`
  - `src/main/services/taskStore.ts`
  - `src/main/ipc/registerMainIpcHandlers.ts`
- Preload
  - `src/preload/index.ts`
  - `src/preload/index.d.ts`
- Renderer
  - `src/renderer/src/App.tsx`
  - `src/renderer/src/components/*`
  - `src/renderer/src/hooks/useDateEditor.ts`
  - `src/renderer/src/hooks/useAuthController.ts`
  - `src/renderer/src/hooks/useDashboardSettings.ts`
  - `src/renderer/src/hooks/useCalendarRows.ts`
  - `src/renderer/src/lib/*`
  - `src/renderer/src/types/ui.ts`
  - `src/renderer/src/assets/main.css`
- Shared
  - `src/shared/contracts.ts`
- ビルド設定
  - `package.json`
  - `electron-builder.yml`

## 1.5 現在の提供価値（ユーザー視点）

- 日次の予定確認をデスクトップ常駐型で行える
- ローカルファイルのみで認証情報・設定を管理できる
- カレンダー一覧（複数カレンダー）からその日の予定を横断表示できる
- 同期操作と自動取得の併用が可能
- タスクをユーザー別に保持し、ゲストでは一時利用できる
