# 07. セットアップ運用手順

## 7.1 前提

- Node.js / npm が利用可能
- Google Cloud で OAuth クライアント作成済み
- `credentials.json` をプロジェクトルートに配置済み

## 7.2 初期セットアップ

```bash
npm install
```

## 7.3 開発実行

```bash
npm run dev
```

型チェック:

```bash
npm run typecheck
```

## 7.4 ビルド

```bash
npm run build
```

OS別:

```bash
npm run build:win
npm run build:mac
npm run build:linux
```

## 7.5 初回ログイン運用

1. アプリ起動
2. `Googleログイン` を押下
3. ブラウザで認証・同意
4. ブラウザ上の完了ページ表示
5. アプリ側へ復帰し、ログイン状態反映

## 7.6 日常運用

- 手動同期
  - 右上 `同期`
- 日付指定
  - 左上日付をクリック -> `yyyy/mm/dd` 入力 -> `OK`
- 自動取得設定
  - 左下歯車 -> 時刻/間隔設定 -> `保存`
- 常駐
  - ウィンドウ `X` 押下時に `バックグラウンド常駐` を選択

## 7.7 自動起動運用（Windows）

- パッケージ版初回実行時のみ `openAtLogin` 設定
- 2回目以降は `_shared/auto-launch-initialized` により再設定しない
- 自動起動時は `--hidden` でウィンドウ非表示起動

## 7.8 トラブルシュート

### ログインできない

- `credentials.json` の `redirect_uris` に `localhost` が含まれるか確認
- Google Cloud 側の OAuth 同意画面設定を確認

### 予定が取れない

- ログイン状態か確認
- 対象日付に予定が存在するか確認
- カレンダー閲覧権限があるか確認

### 自動取得が動かない

- 設定値が保存されているか確認
- 時刻形式 `HH:mm` が有効か確認
- 間隔が 1 分以上か確認
