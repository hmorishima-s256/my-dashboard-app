# 07. セットアップ運用手順

## 7.1 前提

- Node.js / npm が利用可能
- Google Cloud で OAuth クライアント作成済み
- `credentials.json` をプロジェクトルートに配置済み

## 7.2 初期セットアップ

```bash
npm install
```

## 7.3 開発実行

```bash
npm run dev
```

型チェック:

```bash
npm run typecheck
```

## 7.4 ビルド

```bash
npm run build
```

OS別ビルド:

```bash
npm run build:win
npm run build:mac
npm run build:linux
```

## 7.5 初回ログイン運用

1. アプリ起動
2. 右上 `Googleログイン`
3. ブラウザで認証・同意
4. ブラウザで完了画面表示
5. アプリへ復帰し、当日予定が同期される

## 7.6 日常運用

- 手動同期:
  - 右上 `同期`
- 日付変更:
  - 左上日付を押下
  - `yyyy/mm/dd` 入力
  - 必要に応じて `今日` で当日を入力欄へセット
  - `OK`
- 自動取得設定:
  - 左下歯車
  - 時刻/間隔/タスク時間表記モードを設定
  - `保存`
- 常駐:
  - ウィンドウ close 時に `バックグラウンド常駐` を選択

## 7.7 Windows 自動起動運用

- 条件:
  - Windows
  - パッケージ版
- 初回のみ `openAtLogin=true` を設定
- 再設定防止:
  - `_shared/auto-launch-initialized`
- 自動起動引数:
  - `--hidden`

## 7.8 トラブルシュート

### ログインできない

- `credentials.json` の `redirect_uris` に `localhost` があるか確認
- OAuth 同意画面設定を確認

### 予定が取得できない

- ログイン状態を確認
- 対象日付の予定有無を確認
- 該当カレンダー閲覧権限を確認

### 自動取得が動かない

- 設定保存済みか確認
- 時刻形式 `HH:mm` が有効か確認
- 間隔が1分以上か確認

### 常駐動作が意図と違う

- close 時ダイアログで選択したボタンを確認
- `終了` を選ぶと完全終了、`バックグラウンド常駐` でトレイ格納
